# @n3wth/kit Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Build an AI-native component registry that packages @n3wth/ui for consumption by v0, Cursor, Claude Code, Lovable, and other AI coding tools.

**Architecture:** Next.js marketing site + shadcn registry hosted at kit.newth.ai. The registry serves component JSON via the shadcn protocol. AI context packs (.cursorrules, CLAUDE.md, MCP config) ship alongside. CLI scaffolds new projects with the full design system pre-loaded.

**Tech Stack:** Next.js 15, Tailwind CSS 4, shadcn CLI 3.0, React 19, TypeScript, Vite (for registry build)

## Epics Overview

| Epic | Description | Agent | Dependencies |
|------|-------------|-------|-------------|
| E1 | Project scaffold + repo setup | infra | None |
| E2 | Registry conversion (port @n3wth/ui components) | registry | E1 |
| E3 | AI context packs (.cursorrules, CLAUDE.md, MCP) | ai-context | E2 |
| E4 | Marketing site (kit.newth.ai) | site | E1 |
| E5 | CLI tool (`npx @n3wth/kit init`) | cli | E2 |
| E6 | Integration testing (v0, Cursor, Claude Code) | testing | E2, E3 |

## Epic 1: Project Scaffold

### Task 1.1: Initialize Next.js project with Tailwind v4

**Files:**
- Create: `package.json`
- Create: `next.config.ts`
- Create: `tsconfig.json`
- Create: `app/layout.tsx`
- Create: `app/page.tsx`
- Create: `app/globals.css`
- Create: `tailwind.config.ts`

**Step 1: Initialize project**

```bash
cd /Users/oliver/GitHub/kit
npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir=false --import-alias="@/*" --turbopack --yes
```

**Step 2: Verify it runs**

Run: `npm run dev -- --port 3456`
Expected: Next.js dev server at localhost:3456

**Step 3: Commit**

```bash
git add -A && git commit -m "feat: initialize Next.js 15 project with Tailwind v4"
```

### Task 1.2: Set up shadcn CLI and registry structure

**Files:**
- Create: `registry.json`
- Create: `registry/` directory structure
- Modify: `package.json` (add registry:build script)

**Step 1: Initialize shadcn**

```bash
npx shadcn@latest init --yes
```

**Step 2: Create registry.json**

```json
{
  "$schema": "https://ui.shadcn.com/schema/registry.json",
  "name": "n3wth",
  "homepage": "https://kit.newth.ai",
  "items": []
}
```

**Step 3: Add build scripts to package.json**

Add to scripts:
```json
{
  "registry:build": "npx shadcn@latest build",
  "registry:dev": "npx shadcn@latest build --watch"
}
```

**Step 4: Create registry directory structure**

```
registry/
  new-york/
    button/
    card/
    nav/
    hero/
    section/
    footer/
    badge/
    input/
    icon/
    modal/
    tabs/
    toast/
    dropdown/
    accordion/
    tooltip/
    switch/
    avatar/
    separator/
    progress/
    label/
    textarea/
    skeleton/
    code-block/
    command-box/
    theme-toggle/
    error-boundary/
  hooks/
    use-theme/
    use-media-query/
    use-reduced-motion/
    use-keyboard-shortcuts/
    use-toast/
    use-count-up/
    use-scroll-reveal/
  lib/
    cn/
  styles/
    n3wth/
  themes/
    n3wth-dark/
    n3wth-light/
```

**Step 5: Commit**

```bash
git add -A && git commit -m "feat: set up shadcn registry structure"
```

### Task 1.3: Set up CLAUDE.md and project docs

**Files:**
- Create: `CLAUDE.md`
- Create: `README.md`
- Create: `.github/CODEOWNERS`

**Step 1: Create CLAUDE.md**

```markdown
# @n3wth/kit

AI-native component registry for n3wth design system.

## Structure

- `registry/` - Component source files (shadcn registry format)
- `registry.json` - Registry manifest
- `public/r/` - Built registry JSON (generated by `npm run registry:build`)
- `app/` - Marketing site (kit.newth.ai)
- `ai/` - AI context packs (.cursorrules, MCP configs)
- `cli/` - CLI tool source

## Commands

- `npm run dev` - Start marketing site dev server
- `npm run registry:build` - Build registry JSON files
- `npm run build` - Build everything

## Registry Protocol

Components follow shadcn registry-item.json schema. Each component in `registry/new-york/[name]/` has:
- `[name].tsx` - Component source
- `index.ts` - Barrel export

Registry items are defined in `registry.json` and built to `public/r/[name].json`.

Install components: `npx shadcn add https://kit.newth.ai/r/[name].json`
Or with namespace: `npx shadcn add @n3wth/[name]`
```

**Step 2: Commit**

```bash
git add CLAUDE.md README.md && git commit -m "docs: add CLAUDE.md and README"
```

## Epic 2: Registry Conversion

Port all @n3wth/ui components to shadcn registry format. Each component becomes a registry item.

### Task 2.1: Port design tokens and base style

**Files:**
- Create: `registry/styles/n3wth/n3wth.tsx` (empty, required by schema)
- Create: `registry/themes/n3wth-dark/n3wth-dark.tsx`
- Create: `registry/themes/n3wth-light/n3wth-light.tsx`

**Step 1: Create the n3wth style as registry:style item**

Add to registry.json items:
```json
{
  "name": "n3wth",
  "type": "registry:style",
  "description": "Flat, minimal, iOS-inspired design system for n3wth projects.",
  "extends": "none",
  "cssVars": {
    "theme": {
      "font-sans": "Inter, system-ui, -apple-system, sans-serif",
      "radius": "0.625rem"
    },
    "light": {
      "background": "0 0% 100%",
      "foreground": "0 0% 3.9%",
      "primary": "0 0% 9%",
      "primary-foreground": "0 0% 98%",
      "muted": "0 0% 96.1%",
      "muted-foreground": "0 0% 45.1%",
      "accent": "0 0% 96.1%",
      "accent-foreground": "0 0% 9%",
      "border": "0 0% 89.8%",
      "ring": "0 0% 3.9%"
    },
    "dark": {
      "background": "0 0% 0%",
      "foreground": "0 0% 98%",
      "primary": "0 0% 98%",
      "primary-foreground": "0 0% 9%",
      "muted": "0 0% 14.9%",
      "muted-foreground": "0 0% 63.9%",
      "accent": "0 0% 14.9%",
      "accent-foreground": "0 0% 98%",
      "border": "0 0% 14.9%",
      "ring": "0 0% 83.1%"
    }
  },
  "files": []
}
```

**Step 2: Commit**

```bash
git add -A && git commit -m "feat: add n3wth base style with design tokens"
```

### Task 2.2: Port utility function (cn)

**Files:**
- Create: `registry/lib/cn/cn.ts`

**Step 1: Create cn utility**

```typescript
import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

**Step 2: Add to registry.json**

```json
{
  "name": "cn",
  "type": "registry:lib",
  "description": "Tailwind CSS class merge utility",
  "dependencies": ["clsx", "tailwind-merge"],
  "files": [
    {
      "path": "registry/lib/cn/cn.ts",
      "type": "registry:lib"
    }
  ]
}
```

**Step 3: Commit**

```bash
git add -A && git commit -m "feat: add cn utility to registry"
```

### Task 2.3: Port atom components (Button, Badge, Input, Icon, Switch, Avatar, etc.)

For each atom component in @n3wth/ui/src/atoms/:
1. Copy the component source to `registry/new-york/[name]/[name].tsx`
2. Update imports to use `@/lib/cn` instead of `../utils/cn`
3. Add registry item entry to `registry.json`
4. Build and verify: `npm run registry:build`

**Source reference:** `/Users/oliver/GitHub/ui/src/atoms/`

Components to port: Button, Badge, Input, Icon, Switch, Avatar, Separator, Progress, Label, Textarea, Skeleton, CodeBlock, NoiseOverlay, ScrollIndicator, HamburgerIcon, AnimatedText, Shape, Character, SpeechBubble, Tooltip

Each component follows this pattern in registry.json:
```json
{
  "name": "button",
  "type": "registry:ui",
  "title": "Button",
  "description": "Flat, minimal button with size and variant props.",
  "registryDependencies": ["cn"],
  "files": [
    {
      "path": "registry/new-york/button/button.tsx",
      "type": "registry:ui"
    }
  ]
}
```

**Commit after each batch of 5 components.**

### Task 2.4: Port molecule components (Card, Modal, Tabs, Toast, Dropdown, Accordion, etc.)

Same pattern as 2.3 but for molecules.

**Source reference:** `/Users/oliver/GitHub/ui/src/molecules/`

Components: Card, NavLink, CommandBox, ThemeToggle, MobileDrawer, ErrorBoundary, CompositeShape, Modal, Tabs, Toast, Dropdown, Accordion

### Task 2.5: Port organism components (Nav, Footer, Hero, Section)

**Source reference:** `/Users/oliver/GitHub/ui/src/organisms/`

These are `registry:block` type items since they are complex multi-file components.

### Task 2.6: Port hooks

**Source reference:** `/Users/oliver/GitHub/ui/src/hooks/`

Hooks: useTheme, useMediaQuery, useReducedMotion, useKeyboardShortcuts, useToast, useCountUp, useScrollReveal, useStaggerList, usePageTransition, useTextReveal, useButtonPulse

Each hook is `registry:hook` type.

### Task 2.7: Build and validate registry

**Step 1: Build**

```bash
npm run registry:build
```

**Step 2: Validate output**

Check `public/r/` directory has a JSON file for each component. Verify each JSON file has `content` in the files array.

**Step 3: Test installation**

```bash
mkdir /tmp/test-kit && cd /tmp/test-kit
npx create-next-app@latest . --yes
npx shadcn@latest init --yes
npx shadcn@latest add https://localhost:3456/r/button.json
```

**Step 4: Commit**

```bash
git add -A && git commit -m "feat: complete registry build with all components"
```

## Epic 3: AI Context Packs

### Task 3.1: Create .cursorrules file

**Files:**
- Create: `ai/.cursorrules`

Content: Natural language instructions telling Cursor to use @n3wth/kit components. Include component catalog, usage patterns, design principles (flat, minimal, iOS-inspired), and common composition patterns.

### Task 3.2: Create CLAUDE.md context pack

**Files:**
- Create: `ai/CLAUDE.md`

Content: Claude Code integration instructions. Component API reference with props tables. Design token reference. Common patterns (Nav + Hero + Section layout, theme switching, responsive patterns).

### Task 3.3: Create MCP server configuration

**Files:**
- Create: `ai/mcp.json`
- Create: `ai/README.md`

MCP config that points shadcn MCP server at the n3wth registry:

```json
{
  "mcpServers": {
    "n3wth-kit": {
      "command": "npx",
      "args": ["-y", "shadcn@latest", "registry:mcp"],
      "env": {
        "REGISTRY_URL": "https://kit.newth.ai/r/registry.json"
      }
    }
  }
}
```

### Task 3.4: Create component documentation metadata

**Files:**
- Create: `ai/components.json`

Structured JSON with every component's props, usage examples, accessibility notes, and design rationale. This is the "AI context pack" format -- the key product innovation.

```json
{
  "components": [
    {
      "name": "button",
      "description": "Flat, minimal button. No shadows, no gradients.",
      "props": {
        "variant": { "type": "enum", "values": ["default", "outline", "ghost", "link"], "default": "default" },
        "size": { "type": "enum", "values": ["sm", "md", "lg"], "default": "md" }
      },
      "usage": "Use for primary actions. Use ghost variant for secondary. Use outline for tertiary.",
      "a11y": "Always provide accessible label. Use aria-label for icon-only buttons.",
      "patterns": [
        { "name": "CTA pair", "code": "<div className=\"flex gap-3\"><Button>Get Started</Button><Button variant=\"outline\">Learn More</Button></div>" }
      ]
    }
  ]
}
```

**Commit after each task.**

## Epic 4: Marketing Site

### Task 4.1: Design and build landing page

**Files:**
- Modify: `app/page.tsx`
- Create: `app/components/hero.tsx`
- Create: `app/components/demo.tsx`
- Create: `app/components/install-command.tsx`
- Create: `app/components/tool-logos.tsx`

Landing page sections:
1. Hero: "Ship your design system to every AI coding tool"
2. Demo: Side-by-side (default shadcn output vs n3wth/kit output)
3. Supported tools: v0, Cursor, Claude Code, Lovable, Windsurf logos
4. Install command: `npx shadcn add @n3wth/button`
5. Component gallery: live previews of all components

### Task 4.2: Component gallery page

**Files:**
- Create: `app/components/page.tsx`
- Create: `app/components/component-preview.tsx`

Interactive gallery showing each component with:
- Live preview
- Code snippet
- "Open in v0" button
- "Copy for Cursor" button
- shadcn add command

### Task 4.3: Documentation pages

**Files:**
- Create: `app/docs/page.tsx`
- Create: `app/docs/getting-started/page.tsx`
- Create: `app/docs/cursor/page.tsx`
- Create: `app/docs/claude/page.tsx`
- Create: `app/docs/v0/page.tsx`
- Create: `app/docs/lovable/page.tsx`

Tool-specific integration guides.

## Epic 5: CLI Tool

### Task 5.1: Create CLI package

**Files:**
- Create: `cli/package.json`
- Create: `cli/src/index.ts`
- Create: `cli/src/commands/init.ts`

CLI that scaffolds a new project with @n3wth/kit pre-configured:

```bash
npx @n3wth/kit init
# Prompts: project name, framework (Next.js/Vite), theme (dark/light)
# Creates project with components.json pointing to @n3wth registry
# Installs base style and commonly used components
```

## Epic 6: Integration Testing

### Task 6.1: Test v0 integration

- Use "Open in v0" API with each component
- Verify v0 generates code using n3wth components
- Document any limitations (cssVars not supported in v0)

### Task 6.2: Test Cursor integration

- Set up .cursorrules in a test project
- Configure MCP server
- Verify Cursor generates code using n3wth components

### Task 6.3: Test Claude Code integration

- Set up CLAUDE.md in a test project
- Configure MCP server in .claude/mcp.json
- Verify Claude Code uses n3wth components when prompted

### Task 6.4: Submit to shadcn registry directory

- Add n3wth to shadcn-ui/ui registry directory
- Open PR following their submission requirements
