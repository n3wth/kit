{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "accordion",
  "title": "Accordion",
  "description": "Accessible accordion with single/multiple modes and animated content.",
  "registryDependencies": [
    "cn",
    "use-reduced-motion"
  ],
  "files": [
    {
      "path": "registry/new-york/accordion/accordion.tsx",
      "content": "import {\n  forwardRef,\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useRef,\n  useId,\n  type HTMLAttributes,\n  type ButtonHTMLAttributes,\n  type ReactNode,\n  type KeyboardEvent,\n} from 'react'\nimport { cn } from '@/lib/utils'\nimport { useReducedMotion } from '@/hooks/use-reduced-motion'\n\n// --- Contexts ---\n\ninterface AccordionContextValue {\n  openValues: string[]\n  toggle: (value: string) => void\n  type: 'single' | 'multiple'\n  collapsible: boolean\n  baseId: string\n  registerTrigger: (value: string, element: HTMLButtonElement | null) => void\n  getTriggerElements: () => Map<string, HTMLButtonElement>\n}\n\ninterface AccordionItemContextValue {\n  value: string\n  disabled: boolean\n  isOpen: boolean\n}\n\nconst AccordionContext = createContext<AccordionContextValue | null>(null)\nconst AccordionItemContext = createContext<AccordionItemContextValue | null>(null)\n\nfunction useAccordionContext() {\n  const context = useContext(AccordionContext)\n  if (!context) {\n    throw new Error('Accordion compound components must be used within an <Accordion> parent')\n  }\n  return context\n}\n\nfunction useAccordionItemContext() {\n  const context = useContext(AccordionItemContext)\n  if (!context) {\n    throw new Error('AccordionTrigger/AccordionContent must be used within an <AccordionItem> parent')\n  }\n  return context\n}\n\n// --- Accordion Root ---\n\nexport interface AccordionProps extends Omit<HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  /** Whether only one or multiple items can be open */\n  type?: 'single' | 'multiple'\n  /** Controlled open values */\n  value?: string[]\n  /** Default open values for uncontrolled mode */\n  defaultValue?: string[]\n  /** Callback when open values change */\n  onChange?: (value: string[]) => void\n  /** In single mode, allows closing the open item */\n  collapsible?: boolean\n  children: ReactNode\n}\n\nexport const Accordion = forwardRef<HTMLDivElement, AccordionProps>(\n  (\n    {\n      type = 'single',\n      value,\n      defaultValue = [],\n      onChange,\n      collapsible = false,\n      children,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const [internalValue, setInternalValue] = useState<string[]>(defaultValue)\n    const triggerElementsRef = useRef<Map<string, HTMLButtonElement>>(new Map())\n    const baseId = useId()\n\n    const openValues = value !== undefined ? value : internalValue\n\n    const toggle = useCallback(\n      (itemValue: string) => {\n        let next: string[]\n\n        if (type === 'single') {\n          if (openValues.includes(itemValue)) {\n            next = collapsible ? [] : openValues\n          } else {\n            next = [itemValue]\n          }\n        } else {\n          if (openValues.includes(itemValue)) {\n            next = openValues.filter((v) => v !== itemValue)\n          } else {\n            next = [...openValues, itemValue]\n          }\n        }\n\n        if (value === undefined) {\n          setInternalValue(next)\n        }\n        onChange?.(next)\n      },\n      [type, openValues, collapsible, value, onChange]\n    )\n\n    const registerTrigger = useCallback((triggerValue: string, element: HTMLButtonElement | null) => {\n      if (element) {\n        triggerElementsRef.current.set(triggerValue, element)\n      } else {\n        triggerElementsRef.current.delete(triggerValue)\n      }\n    }, [])\n\n    const getTriggerElements = useCallback(() => triggerElementsRef.current, [])\n\n    return (\n      <AccordionContext.Provider\n        value={{ openValues, toggle, type, collapsible, baseId, registerTrigger, getTriggerElements }}\n      >\n        <div\n          ref={ref}\n          className={cn('flex flex-col divide-y divide-[var(--glass-border)]', className)}\n          {...props}\n        >\n          {children}\n        </div>\n      </AccordionContext.Provider>\n    )\n  }\n)\n\nAccordion.displayName = 'Accordion'\n\n// --- AccordionItem ---\n\nexport interface AccordionItemProps extends HTMLAttributes<HTMLDivElement> {\n  /** Unique identifier for this item */\n  value: string\n  /** Whether this item is disabled */\n  disabled?: boolean\n  children: ReactNode\n}\n\nexport const AccordionItem = forwardRef<HTMLDivElement, AccordionItemProps>(\n  ({ value, disabled = false, children, className, ...props }, ref) => {\n    const { openValues } = useAccordionContext()\n    const isOpen = openValues.includes(value)\n\n    return (\n      <AccordionItemContext.Provider value={{ value, disabled, isOpen }}>\n        <div ref={ref} className={className} {...props}>\n          {children}\n        </div>\n      </AccordionItemContext.Provider>\n    )\n  }\n)\n\nAccordionItem.displayName = 'AccordionItem'\n\n// --- AccordionTrigger ---\n\nexport interface AccordionTriggerProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  children: ReactNode\n}\n\nexport const AccordionTrigger = forwardRef<HTMLButtonElement, AccordionTriggerProps>(\n  ({ children, className, onKeyDown, ...props }, ref) => {\n    const { toggle, baseId, registerTrigger, getTriggerElements } = useAccordionContext()\n    const { value, disabled, isOpen } = useAccordionItemContext()\n    const internalRef = useRef<HTMLButtonElement | null>(null)\n    const prefersReducedMotion = useReducedMotion()\n\n    const triggerId = `${baseId}-trigger-${value}`\n    const contentId = `${baseId}-content-${value}`\n\n    const mergedRef = useCallback(\n      (node: HTMLButtonElement | null) => {\n        internalRef.current = node\n        registerTrigger(value, node)\n        if (typeof ref === 'function') ref(node)\n        else if (ref) (ref as React.MutableRefObject<HTMLButtonElement | null>).current = node\n      },\n      [ref, registerTrigger, value]\n    )\n\n    const handleKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLButtonElement>) => {\n        onKeyDown?.(e)\n        if (e.defaultPrevented) return\n\n        const triggers = getTriggerElements()\n        const triggerValues = Array.from(triggers.keys())\n        const currentIndex = triggerValues.indexOf(value)\n\n        let targetIndex: number\n\n        switch (e.key) {\n          case 'ArrowDown':\n            targetIndex = (currentIndex + 1) % triggerValues.length\n            break\n          case 'ArrowUp':\n            targetIndex = (currentIndex - 1 + triggerValues.length) % triggerValues.length\n            break\n          case 'Home':\n            targetIndex = 0\n            break\n          case 'End':\n            targetIndex = triggerValues.length - 1\n            break\n          default:\n            return\n        }\n\n        e.preventDefault()\n        const targetValue = triggerValues[targetIndex]\n        const targetElement = triggers.get(targetValue)\n        if (targetElement) {\n          targetElement.focus()\n        }\n      },\n      [onKeyDown, getTriggerElements, value]\n    )\n\n    return (\n      <button\n        ref={mergedRef}\n        type=\"button\"\n        id={triggerId}\n        aria-expanded={isOpen}\n        aria-controls={contentId}\n        aria-disabled={disabled || undefined}\n        onClick={() => {\n          if (!disabled) toggle(value)\n        }}\n        onKeyDown={handleKeyDown}\n        className={cn(\n          'flex w-full items-center justify-between',\n          'py-3 text-sm font-medium text-[var(--color-white)]',\n          'hover:text-[var(--color-grey-300)]',\n          'cursor-pointer',\n          disabled && 'opacity-50 cursor-not-allowed hover:text-[var(--color-white)]',\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 16 16\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n          className={cn(\n            'shrink-0',\n            prefersReducedMotion ? 'transition-none' : 'transition-transform duration-200',\n            isOpen && 'rotate-180'\n          )}\n        >\n          <path d=\"M4 6l4 4 4-4\" />\n        </svg>\n      </button>\n    )\n  }\n)\n\nAccordionTrigger.displayName = 'AccordionTrigger'\n\n// --- AccordionContent ---\n\nexport interface AccordionContentProps extends HTMLAttributes<HTMLDivElement> {\n  children: ReactNode\n}\n\nexport const AccordionContent = forwardRef<HTMLDivElement, AccordionContentProps>(\n  ({ children, className, ...props }, ref) => {\n    const { baseId } = useAccordionContext()\n    const { value, isOpen } = useAccordionItemContext()\n    const prefersReducedMotion = useReducedMotion()\n\n    const triggerId = `${baseId}-trigger-${value}`\n    const contentId = `${baseId}-content-${value}`\n\n    return (\n      <div\n        ref={ref}\n        id={contentId}\n        role=\"region\"\n        aria-labelledby={triggerId}\n        className={cn(\n          'grid',\n          prefersReducedMotion\n            ? 'transition-none'\n            : 'transition-[grid-template-rows] duration-200 ease-out',\n          isOpen ? 'grid-template-rows-open' : 'grid-template-rows-closed'\n        )}\n        style={{\n          gridTemplateRows: isOpen ? '1fr' : '0fr',\n        }}\n        {...props}\n      >\n        <div className=\"overflow-hidden\">\n          <div className={cn('pb-3 text-sm text-[var(--color-grey-400)]', className)}>\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\n\nAccordionContent.displayName = 'AccordionContent'\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}