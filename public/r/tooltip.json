{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tooltip",
  "title": "Tooltip",
  "description": "Portal-based tooltip with auto-positioning and arrow.",
  "dependencies": [
    "react-dom"
  ],
  "registryDependencies": [
    "cn"
  ],
  "files": [
    {
      "path": "registry/new-york/tooltip/tooltip.tsx",
      "content": "import {\n  forwardRef,\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n  useId,\n  type ReactNode,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport { cn } from '@/lib/utils'\n\nexport type TooltipPosition = 'top' | 'right' | 'bottom' | 'left'\n\nexport interface TooltipProps {\n  /** Content to display inside the tooltip */\n  content: ReactNode\n  /** The element that triggers the tooltip */\n  children: ReactNode\n  /** Preferred position of the tooltip relative to the trigger */\n  position?: TooltipPosition\n  /** Delay in ms before showing the tooltip */\n  showDelay?: number\n  /** Delay in ms before hiding the tooltip */\n  hideDelay?: number\n  /** Whether the tooltip is disabled */\n  disabled?: boolean\n  /** Show arrow indicator */\n  arrow?: boolean\n  /** Additional class names for the tooltip popup */\n  className?: string\n}\n\ninterface Coords {\n  top: number\n  left: number\n  actualPosition: TooltipPosition\n}\n\nfunction getCoords(\n  triggerRect: DOMRect,\n  tooltipRect: DOMRect,\n  preferred: TooltipPosition,\n  gap: number\n): Coords {\n  const viewport = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  }\n\n  const positions: Record<TooltipPosition, { top: number; left: number }> = {\n    top: {\n      top: triggerRect.top - tooltipRect.height - gap,\n      left: triggerRect.left + (triggerRect.width - tooltipRect.width) / 2,\n    },\n    bottom: {\n      top: triggerRect.bottom + gap,\n      left: triggerRect.left + (triggerRect.width - tooltipRect.width) / 2,\n    },\n    left: {\n      top: triggerRect.top + (triggerRect.height - tooltipRect.height) / 2,\n      left: triggerRect.left - tooltipRect.width - gap,\n    },\n    right: {\n      top: triggerRect.top + (triggerRect.height - tooltipRect.height) / 2,\n      left: triggerRect.right + gap,\n    },\n  }\n\n  const fits = (pos: TooltipPosition): boolean => {\n    const { top, left } = positions[pos]\n    return (\n      top >= 0 &&\n      left >= 0 &&\n      top + tooltipRect.height <= viewport.height &&\n      left + tooltipRect.width <= viewport.width\n    )\n  }\n\n  const fallbackOrder: Record<TooltipPosition, TooltipPosition[]> = {\n    top: ['top', 'bottom', 'right', 'left'],\n    bottom: ['bottom', 'top', 'right', 'left'],\n    left: ['left', 'right', 'top', 'bottom'],\n    right: ['right', 'left', 'top', 'bottom'],\n  }\n\n  const actualPosition = fallbackOrder[preferred].find(fits) ?? preferred\n  const coords = positions[actualPosition]\n\n  const pad = 8\n  return {\n    top: Math.max(pad, Math.min(coords.top, viewport.height - tooltipRect.height - pad)),\n    left: Math.max(pad, Math.min(coords.left, viewport.width - tooltipRect.width - pad)),\n    actualPosition,\n  }\n}\n\nexport const Tooltip = forwardRef<HTMLDivElement, TooltipProps>(\n  (\n    {\n      content,\n      children,\n      position = 'top',\n      showDelay = 200,\n      hideDelay = 0,\n      disabled = false,\n      arrow = true,\n      className,\n    },\n    ref\n  ) => {\n    const [visible, setVisible] = useState(false)\n    const [coords, setCoords] = useState<Coords | null>(null)\n    const triggerRef = useRef<HTMLDivElement | null>(null)\n    const tooltipRef = useRef<HTMLDivElement | null>(null)\n    const showTimeout = useRef<ReturnType<typeof setTimeout> | undefined>(undefined)\n    const hideTimeout = useRef<ReturnType<typeof setTimeout> | undefined>(undefined)\n    const tooltipId = useId()\n\n    const updatePosition = useCallback(() => {\n      const trigger = triggerRef.current\n      const tooltip = tooltipRef.current\n      if (!trigger || !tooltip) return\n\n      const triggerRect = trigger.getBoundingClientRect()\n      const tooltipRect = tooltip.getBoundingClientRect()\n      setCoords(getCoords(triggerRect, tooltipRect, position, 8))\n    }, [position])\n\n    const show = useCallback(() => {\n      if (disabled) return\n      if (hideTimeout.current !== undefined) clearTimeout(hideTimeout.current)\n      showTimeout.current = setTimeout(() => {\n        setVisible(true)\n      }, showDelay)\n    }, [disabled, showDelay])\n\n    const hide = useCallback(() => {\n      if (showTimeout.current !== undefined) clearTimeout(showTimeout.current)\n      hideTimeout.current = setTimeout(() => {\n        setVisible(false)\n        setCoords(null)\n      }, hideDelay)\n    }, [hideDelay])\n\n    useEffect(() => {\n      if (visible) {\n        const id = requestAnimationFrame(updatePosition)\n        return () => cancelAnimationFrame(id)\n      }\n    }, [visible, updatePosition])\n\n    useEffect(() => {\n      if (!visible) return\n\n      const handleUpdate = () => updatePosition()\n      window.addEventListener('scroll', handleUpdate, true)\n      window.addEventListener('resize', handleUpdate)\n      return () => {\n        window.removeEventListener('scroll', handleUpdate, true)\n        window.removeEventListener('resize', handleUpdate)\n      }\n    }, [visible, updatePosition])\n\n    useEffect(() => {\n      return () => {\n        if (showTimeout.current !== undefined) clearTimeout(showTimeout.current)\n        if (hideTimeout.current !== undefined) clearTimeout(hideTimeout.current)\n      }\n    }, [])\n\n    const arrowStyles: Record<TooltipPosition, string> = {\n      top: 'bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45',\n      bottom: 'top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 rotate-45',\n      left: 'right-0 top-1/2 translate-x-1/2 -translate-y-1/2 rotate-45',\n      right: 'left-0 top-1/2 -translate-x-1/2 -translate-y-1/2 rotate-45',\n    }\n\n    const actualPos = coords?.actualPosition ?? position\n\n    const tooltipElement = visible\n      ? createPortal(\n          <div\n            ref={tooltipRef}\n            id={tooltipId}\n            role=\"tooltip\"\n            style={\n              coords\n                ? { top: coords.top, left: coords.left }\n                : { top: -9999, left: -9999 }\n            }\n            className={cn(\n              'fixed z-50 pointer-events-none',\n              'max-w-xs px-3 py-1.5',\n              'text-xs font-medium text-[var(--color-white)]',\n              'rounded-lg',\n              'bg-[var(--glass-bg)] backdrop-blur-lg',\n              'border border-[var(--glass-border)]',\n              coords\n                ? [\n                    'opacity-100 scale-100',\n                    'motion-safe:transition-[opacity,transform] motion-safe:duration-150 motion-safe:ease-out',\n                  ]\n                : 'opacity-0 scale-95',\n              className\n            )}\n          >\n            {content}\n            {arrow && (\n              <span\n                aria-hidden\n                className={cn(\n                  'absolute w-2 h-2',\n                  'bg-[var(--glass-bg)]',\n                  'border border-[var(--glass-border)]',\n                  arrowStyles[actualPos],\n                  actualPos === 'top' && 'border-t-0 border-l-0',\n                  actualPos === 'bottom' && 'border-b-0 border-r-0',\n                  actualPos === 'left' && 'border-l-0 border-b-0',\n                  actualPos === 'right' && 'border-r-0 border-t-0'\n                )}\n              />\n            )}\n          </div>,\n          document.body\n        )\n      : null\n\n    return (\n      <>\n        <div\n          ref={(node) => {\n            triggerRef.current = node\n            if (typeof ref === 'function') ref(node)\n            else if (ref) ref.current = node\n          }}\n          onMouseEnter={show}\n          onMouseLeave={hide}\n          onFocus={show}\n          onBlur={hide}\n          aria-describedby={visible ? tooltipId : undefined}\n          className=\"inline-flex\"\n        >\n          {children}\n        </div>\n        {tooltipElement}\n      </>\n    )\n  }\n)\n\nTooltip.displayName = 'Tooltip'\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}